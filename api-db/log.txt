Attaching to timescale_av, api-db_web_1
[33mtimescale_av |[0m 
[33mtimescale_av |[0m PostgreSQL Database directory appears to contain a database; Skipping initialization
[33mtimescale_av |[0m 
[33mtimescale_av |[0m 2023-04-01 09:33:26.623 UTC [1] LOG:  starting PostgreSQL 12.14 on x86_64-pc-linux-musl, compiled by gcc (Alpine 12.2.1_git20220924-r4) 12.2.1 20220924, 64-bit
[33mtimescale_av |[0m 2023-04-01 09:33:26.624 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
[33mtimescale_av |[0m 2023-04-01 09:33:26.624 UTC [1] LOG:  listening on IPv6 address "::", port 5432
[33mtimescale_av |[0m 2023-04-01 09:33:26.658 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
[33mtimescale_av |[0m 2023-04-01 09:33:26.874 UTC [22] LOG:  database system was shut down at 2023-04-01 09:30:06 UTC
[33mtimescale_av |[0m 2023-04-01 09:33:26.911 UTC [1] LOG:  database system is ready to accept connections
[33mtimescale_av |[0m 2023-04-01 09:33:26.914 UTC [28] LOG:  TimescaleDB background worker launcher connected to shared catalogs
[36mweb_1        |[0m INFO:     Will watch for changes in these directories: ['/app']
[36mweb_1        |[0m INFO:     Uvicorn running on http://0.0.0.0:80 (Press CTRL+C to quit)
[36mweb_1        |[0m INFO:     Started reloader process [1] using StatReload
[36mweb_1        |[0m INFO:     Started server process [8]
[36mweb_1        |[0m INFO:     Waiting for application startup.
[36mweb_1        |[0m INFO:     Application startup complete.
[36mweb_1        |[0m WARNING:  StatReload detected changes in 'web/main.py'. Reloading...
[36mweb_1        |[0m INFO:     Shutting down
[36mweb_1        |[0m INFO:     Waiting for application shutdown.
[36mweb_1        |[0m INFO:     Application shutdown complete.
[36mweb_1        |[0m INFO:     Finished server process [8]
[36mweb_1        |[0m Failed to create database tables
[36mweb_1        |[0m (psycopg2.OperationalError) could not connect to server: Connection timed out
[36mweb_1        |[0m 	Is the server running on host "192.168.224.1" and accepting
[36mweb_1        |[0m 	TCP/IP connections on port 5432?
[36mweb_1        |[0m 
[36mweb_1        |[0m (Background on this error at: https://sqlalche.me/e/20/e3q8)
[36mweb_1        |[0m INFO:     Started server process [10]
[36mweb_1        |[0m INFO:     Waiting for application startup.
[36mweb_1        |[0m INFO:     Application startup complete.
Gracefully stopping... (press Ctrl+C again to force)
Attaching to timescale_av, api-db_web_1
[33mtimescale_av |[0m 
[33mtimescale_av |[0m PostgreSQL Database directory appears to contain a database; Skipping initialization
[33mtimescale_av |[0m 
[33mtimescale_av |[0m 2023-04-01 09:36:04.945 UTC [1] LOG:  starting PostgreSQL 12.14 on x86_64-pc-linux-musl, compiled by gcc (Alpine 12.2.1_git20220924-r4) 12.2.1 20220924, 64-bit
[33mtimescale_av |[0m 2023-04-01 09:36:04.945 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
[33mtimescale_av |[0m 2023-04-01 09:36:04.945 UTC [1] LOG:  listening on IPv6 address "::", port 5432
[33mtimescale_av |[0m 2023-04-01 09:36:04.979 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
[33mtimescale_av |[0m 2023-04-01 09:36:05.188 UTC [22] LOG:  database system was shut down at 2023-04-01 09:35:54 UTC
[33mtimescale_av |[0m 2023-04-01 09:36:05.224 UTC [1] LOG:  database system is ready to accept connections
[33mtimescale_av |[0m 2023-04-01 09:36:05.226 UTC [28] LOG:  TimescaleDB background worker launcher connected to shared catalogs
[36mweb_1        |[0m INFO:     Will watch for changes in these directories: ['/app']
[36mweb_1        |[0m INFO:     Uvicorn running on http://0.0.0.0:80 (Press CTRL+C to quit)
[36mweb_1        |[0m INFO:     Started reloader process [1] using StatReload
[36mweb_1        |[0m INFO:     Started server process [8]
[36mweb_1        |[0m INFO:     Waiting for application startup.
[36mweb_1        |[0m INFO:     Application startup complete.
[36mweb_1        |[0m INFO:     192.168.1.214:63599 - "GET / HTTP/1.1" 200 OK
[36mweb_1        |[0m INFO:     192.168.1.214:63599 - "GET /settings HTTP/1.1" 200 OK
[36mweb_1        |[0m INFO:     192.168.1.214:63599 - "GET /api_manager HTTP/1.1" 200 OK
[36mweb_1        |[0m INFO:     192.168.1.214:63599 - "POST /api/api_manager HTTP/1.1" 500 Internal Server Error
[36mweb_1        |[0m ERROR:    Exception in ASGI application
[36mweb_1        |[0m Traceback (most recent call last):
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 429, in run_asgi
[36mweb_1        |[0m     result = await app(  # type: ignore[func-returns-value]
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
[36mweb_1        |[0m     return await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 276, in __call__
[36mweb_1        |[0m     await super().__call__(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
[36mweb_1        |[0m     await self.middleware_stack(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
[36mweb_1        |[0m     raise exc
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, _send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
[36mweb_1        |[0m     raise exc
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, sender)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
[36mweb_1        |[0m     raise e
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
[36mweb_1        |[0m     await route.handle(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
[36mweb_1        |[0m     await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 66, in app
[36mweb_1        |[0m     response = await func(request)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 237, in app
[36mweb_1        |[0m     raw_response = await run_endpoint_function(
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
[36mweb_1        |[0m     return await dependant.call(**values)
[36mweb_1        |[0m   File "/app/web/main.py", line 57, in add_api_key
[36mweb_1        |[0m     api_key = schemas.ApiKey(name=name, binance_key=binance_key, binance_secret=binance_secret)
[36mweb_1        |[0m   File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
[36mweb_1        |[0m pydantic.error_wrappers.ValidationError: 2 validation errors for ApiKey
[36mweb_1        |[0m id
[36mweb_1        |[0m   field required (type=value_error.missing)
[36mweb_1        |[0m created_date
[36mweb_1        |[0m   field required (type=value_error.missing)
[36mweb_1        |[0m WARNING:  StatReload detected changes in 'web/database.py'. Reloading...
[36mweb_1        |[0m INFO:     Shutting down
[36mweb_1        |[0m INFO:     Waiting for application shutdown.
[36mweb_1        |[0m INFO:     Application shutdown complete.
[36mweb_1        |[0m INFO:     Finished server process [8]
[36mweb_1        |[0m INFO:     Started server process [11]
[36mweb_1        |[0m INFO:     Waiting for application startup.
[36mweb_1        |[0m INFO:     Application startup complete.
Attaching to timescale_av, api-db_web_1
[33mtimescale_av |[0m 
[33mtimescale_av |[0m PostgreSQL Database directory appears to contain a database; Skipping initialization
[33mtimescale_av |[0m 
[33mtimescale_av |[0m 2023-04-01 09:43:57.021 UTC [1] LOG:  starting PostgreSQL 12.14 on x86_64-pc-linux-musl, compiled by gcc (Alpine 12.2.1_git20220924-r4) 12.2.1 20220924, 64-bit
[33mtimescale_av |[0m 2023-04-01 09:43:57.021 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
[33mtimescale_av |[0m 2023-04-01 09:43:57.021 UTC [1] LOG:  listening on IPv6 address "::", port 5432
[33mtimescale_av |[0m 2023-04-01 09:43:57.054 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
[33mtimescale_av |[0m 2023-04-01 09:43:57.279 UTC [22] LOG:  database system was shut down at 2023-04-01 09:43:51 UTC
[33mtimescale_av |[0m 2023-04-01 09:43:57.316 UTC [1] LOG:  database system is ready to accept connections
[33mtimescale_av |[0m 2023-04-01 09:43:57.319 UTC [28] LOG:  TimescaleDB background worker launcher connected to shared catalogs
[36mweb_1        |[0m INFO:     Will watch for changes in these directories: ['/app']
[36mweb_1        |[0m INFO:     Uvicorn running on http://0.0.0.0:80 (Press CTRL+C to quit)
[36mweb_1        |[0m INFO:     Started reloader process [1] using StatReload
[36mweb_1        |[0m INFO:     Started server process [11]
[36mweb_1        |[0m INFO:     Waiting for application startup.
[36mweb_1        |[0m INFO:     Application startup complete.
[36mweb_1        |[0m INFO:     192.168.1.214:63901 - "GET / HTTP/1.1" 200 OK
[36mweb_1        |[0m INFO:     192.168.1.214:63914 - "GET /settings HTTP/1.1" 200 OK
[36mweb_1        |[0m INFO:     192.168.1.214:63914 - "GET /api_manager HTTP/1.1" 200 OK
[36mweb_1        |[0m INFO:     192.168.1.214:63914 - "POST /api/api_manager HTTP/1.1" 500 Internal Server Error
[36mweb_1        |[0m ERROR:    Exception in ASGI application
[36mweb_1        |[0m Traceback (most recent call last):
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 429, in run_asgi
[36mweb_1        |[0m     result = await app(  # type: ignore[func-returns-value]
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
[36mweb_1        |[0m     return await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 276, in __call__
[36mweb_1        |[0m     await super().__call__(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
[36mweb_1        |[0m     await self.middleware_stack(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
[36mweb_1        |[0m     raise exc
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, _send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
[36mweb_1        |[0m     raise exc
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, sender)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
[36mweb_1        |[0m     raise e
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
[36mweb_1        |[0m     await route.handle(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
[36mweb_1        |[0m     await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 66, in app
[36mweb_1        |[0m     response = await func(request)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 237, in app
[36mweb_1        |[0m     raw_response = await run_endpoint_function(
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
[36mweb_1        |[0m     return await dependant.call(**values)
[36mweb_1        |[0m   File "/app/web/main.py", line 57, in add_api_key
[36mweb_1        |[0m     api_key = schemas.ApiKey(name=name, binance_key=binance_key, binance_secret=binance_secret)
[36mweb_1        |[0m   File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
[36mweb_1        |[0m pydantic.error_wrappers.ValidationError: 2 validation errors for ApiKey
[36mweb_1        |[0m id
[36mweb_1        |[0m   field required (type=value_error.missing)
[36mweb_1        |[0m created_date
[36mweb_1        |[0m   field required (type=value_error.missing)
[36mweb_1        |[0m WARNING:  StatReload detected changes in 'web/schemas.py'. Reloading...
[36mweb_1        |[0m INFO:     Shutting down
[36mweb_1        |[0m INFO:     Waiting for application shutdown.
[36mweb_1        |[0m INFO:     Application shutdown complete.
[36mweb_1        |[0m INFO:     Finished server process [11]
[36mweb_1        |[0m INFO:     Started server process [14]
[36mweb_1        |[0m INFO:     Waiting for application startup.
[36mweb_1        |[0m INFO:     Application startup complete.
Attaching to timescale_av, api-db_web_1
[33mtimescale_av |[0m 
[33mtimescale_av |[0m PostgreSQL Database directory appears to contain a database; Skipping initialization
[33mtimescale_av |[0m 
[33mtimescale_av |[0m 2023-04-01 09:49:10.579 UTC [1] LOG:  starting PostgreSQL 12.14 on x86_64-pc-linux-musl, compiled by gcc (Alpine 12.2.1_git20220924-r4) 12.2.1 20220924, 64-bit
[33mtimescale_av |[0m 2023-04-01 09:49:10.579 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
[33mtimescale_av |[0m 2023-04-01 09:49:10.579 UTC [1] LOG:  listening on IPv6 address "::", port 5432
[33mtimescale_av |[0m 2023-04-01 09:49:10.621 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
[33mtimescale_av |[0m 2023-04-01 09:49:10.838 UTC [23] LOG:  database system was shut down at 2023-04-01 09:49:02 UTC
[33mtimescale_av |[0m 2023-04-01 09:49:10.874 UTC [1] LOG:  database system is ready to accept connections
[33mtimescale_av |[0m 2023-04-01 09:49:10.877 UTC [29] LOG:  TimescaleDB background worker launcher connected to shared catalogs
[36mweb_1        |[0m INFO:     Will watch for changes in these directories: ['/app']
[36mweb_1        |[0m INFO:     Uvicorn running on http://0.0.0.0:80 (Press CTRL+C to quit)
[36mweb_1        |[0m INFO:     Started reloader process [1] using StatReload
[36mweb_1        |[0m INFO:     Started server process [9]
[36mweb_1        |[0m INFO:     Waiting for application startup.
[36mweb_1        |[0m INFO:     Application startup complete.
[36mweb_1        |[0m INFO:     192.168.1.214:64269 - "GET / HTTP/1.1" 200 OK
[36mweb_1        |[0m INFO:     192.168.1.214:64269 - "GET /settings HTTP/1.1" 200 OK
[36mweb_1        |[0m INFO:     192.168.1.214:64269 - "GET /api_manager HTTP/1.1" 200 OK
[36mweb_1        |[0m INFO:     192.168.1.214:64293 - "POST /api/api_manager HTTP/1.1" 500 Internal Server Error
[36mweb_1        |[0m ERROR:    Exception in ASGI application
[36mweb_1        |[0m Traceback (most recent call last):
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 429, in run_asgi
[36mweb_1        |[0m     result = await app(  # type: ignore[func-returns-value]
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
[36mweb_1        |[0m     return await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 276, in __call__
[36mweb_1        |[0m     await super().__call__(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
[36mweb_1        |[0m     await self.middleware_stack(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
[36mweb_1        |[0m     raise exc
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, _send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
[36mweb_1        |[0m     raise exc
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, sender)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
[36mweb_1        |[0m     raise e
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
[36mweb_1        |[0m     await route.handle(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
[36mweb_1        |[0m     await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 66, in app
[36mweb_1        |[0m     response = await func(request)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 237, in app
[36mweb_1        |[0m     raw_response = await run_endpoint_function(
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
[36mweb_1        |[0m     return await dependant.call(**values)
[36mweb_1        |[0m   File "/app/web/main.py", line 57, in add_api_key
[36mweb_1        |[0m     api_key = schemas.ApiKey(name=name, binance_key=binance_key, binance_secret=binance_secret)
[36mweb_1        |[0m   File "pydantic/main.py", line 341, in pydantic.main.BaseModel.__init__
[36mweb_1        |[0m pydantic.error_wrappers.ValidationError: 2 validation errors for ApiKey
[36mweb_1        |[0m id
[36mweb_1        |[0m   field required (type=value_error.missing)
[36mweb_1        |[0m created_date
[36mweb_1        |[0m   field required (type=value_error.missing)
Attaching to timescale_av, api-db_web_1
[33mtimescale_av |[0m 
[33mtimescale_av |[0m PostgreSQL Database directory appears to contain a database; Skipping initialization
[33mtimescale_av |[0m 
[33mtimescale_av |[0m 2023-04-01 09:52:22.121 UTC [1] LOG:  starting PostgreSQL 12.14 on x86_64-pc-linux-musl, compiled by gcc (Alpine 12.2.1_git20220924-r4) 12.2.1 20220924, 64-bit
[33mtimescale_av |[0m 2023-04-01 09:52:22.121 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
[33mtimescale_av |[0m 2023-04-01 09:52:22.121 UTC [1] LOG:  listening on IPv6 address "::", port 5432
[33mtimescale_av |[0m 2023-04-01 09:52:22.155 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
[33mtimescale_av |[0m 2023-04-01 09:52:22.389 UTC [22] LOG:  database system was shut down at 2023-04-01 09:50:17 UTC
[33mtimescale_av |[0m 2023-04-01 09:52:22.426 UTC [1] LOG:  database system is ready to accept connections
[33mtimescale_av |[0m 2023-04-01 09:52:22.429 UTC [28] LOG:  TimescaleDB background worker launcher connected to shared catalogs
[36mweb_1        |[0m INFO:     Will watch for changes in these directories: ['/app']
[36mweb_1        |[0m INFO:     Uvicorn running on http://0.0.0.0:80 (Press CTRL+C to quit)
[36mweb_1        |[0m INFO:     Started reloader process [1] using StatReload
[36mweb_1        |[0m INFO:     Started server process [8]
[36mweb_1        |[0m INFO:     Waiting for application startup.
[36mweb_1        |[0m INFO:     Application startup complete.
[36mweb_1        |[0m INFO:     192.168.1.214:64502 - "GET / HTTP/1.1" 200 OK
[36mweb_1        |[0m INFO:     192.168.1.214:64502 - "GET /settings HTTP/1.1" 200 OK
[36mweb_1        |[0m INFO:     192.168.1.214:64502 - "GET /api_manager HTTP/1.1" 200 OK
[36mweb_1        |[0m INFO:     192.168.1.214:64509 - "POST /api/api_manager HTTP/1.1" 500 Internal Server Error
[36mweb_1        |[0m ERROR:    Exception in ASGI application
[36mweb_1        |[0m Traceback (most recent call last):
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 3319, in add
[36mweb_1        |[0m     state = attributes.instance_state(instance)
[36mweb_1        |[0m AttributeError: 'ApiKey' object has no attribute '_sa_instance_state'
[36mweb_1        |[0m 
[36mweb_1        |[0m The above exception was the direct cause of the following exception:
[36mweb_1        |[0m 
[36mweb_1        |[0m Traceback (most recent call last):
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 429, in run_asgi
[36mweb_1        |[0m     result = await app(  # type: ignore[func-returns-value]
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
[36mweb_1        |[0m     return await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 276, in __call__
[36mweb_1        |[0m     await super().__call__(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
[36mweb_1        |[0m     await self.middleware_stack(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
[36mweb_1        |[0m     raise exc
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, _send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
[36mweb_1        |[0m     raise exc
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, sender)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
[36mweb_1        |[0m     raise e
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
[36mweb_1        |[0m     await route.handle(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
[36mweb_1        |[0m     await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 66, in app
[36mweb_1        |[0m     response = await func(request)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 237, in app
[36mweb_1        |[0m     raw_response = await run_endpoint_function(
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
[36mweb_1        |[0m     return await dependant.call(**values)
[36mweb_1        |[0m   File "/app/web/main.py", line 58, in add_api_key
[36mweb_1        |[0m     db.add(api_key)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 3321, in add
[36mweb_1        |[0m     raise exc.UnmappedInstanceError(instance) from err
[36mweb_1        |[0m sqlalchemy.orm.exc.UnmappedInstanceError: Class 'web.schemas.ApiKey' is not mapped
Attaching to timescale_av, api-db_web_1
[33mtimescale_av |[0m 
[33mtimescale_av |[0m PostgreSQL Database directory appears to contain a database; Skipping initialization
[33mtimescale_av |[0m 
[33mtimescale_av |[0m 2023-04-01 09:55:12.788 UTC [1] LOG:  starting PostgreSQL 12.14 on x86_64-pc-linux-musl, compiled by gcc (Alpine 12.2.1_git20220924-r4) 12.2.1 20220924, 64-bit
[33mtimescale_av |[0m 2023-04-01 09:55:12.788 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
[33mtimescale_av |[0m 2023-04-01 09:55:12.788 UTC [1] LOG:  listening on IPv6 address "::", port 5432
[33mtimescale_av |[0m 2023-04-01 09:55:12.820 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
[33mtimescale_av |[0m 2023-04-01 09:55:13.036 UTC [22] LOG:  database system was shut down at 2023-04-01 09:52:57 UTC
[33mtimescale_av |[0m 2023-04-01 09:55:13.073 UTC [1] LOG:  database system is ready to accept connections
[33mtimescale_av |[0m 2023-04-01 09:55:13.076 UTC [28] LOG:  TimescaleDB background worker launcher connected to shared catalogs
[36mweb_1        |[0m INFO:     Will watch for changes in these directories: ['/app']
[36mweb_1        |[0m INFO:     Uvicorn running on http://0.0.0.0:80 (Press CTRL+C to quit)
[36mweb_1        |[0m INFO:     Started reloader process [1] using StatReload
[36mweb_1        |[0m Process SpawnProcess-1:
[36mweb_1        |[0m Traceback (most recent call last):
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/multiprocessing/process.py", line 315, in _bootstrap
[36mweb_1        |[0m     self.run()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/multiprocessing/process.py", line 108, in run
[36mweb_1        |[0m     self._target(*self._args, **self._kwargs)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
[36mweb_1        |[0m     target(sockets=sockets)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 59, in run
[36mweb_1        |[0m     return asyncio.run(self.serve(sockets=sockets))
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/asyncio/runners.py", line 44, in run
[36mweb_1        |[0m     return loop.run_until_complete(main)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/asyncio/base_events.py", line 616, in run_until_complete
[36mweb_1        |[0m     return future.result()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 66, in serve
[36mweb_1        |[0m     config.load()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/config.py", line 471, in load
[36mweb_1        |[0m     self.loaded_app = import_from_string(self.app)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/importer.py", line 24, in import_from_string
[36mweb_1        |[0m     raise exc from None
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/importer.py", line 21, in import_from_string
[36mweb_1        |[0m     module = importlib.import_module(module_str)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/importlib/__init__.py", line 127, in import_module
[36mweb_1        |[0m     return _bootstrap._gcd_import(name[level:], package, level)
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 1014, in _gcd_import
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 991, in _find_and_load
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 975, in _find_and_load_unlocked
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 671, in _load_unlocked
[36mweb_1        |[0m   File "<frozen importlib._bootstrap_external>", line 843, in exec_module
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 219, in _call_with_frames_removed
[36mweb_1        |[0m   File "/app/web/main.py", line 7, in <module>
[36mweb_1        |[0m     from .import schemas, database
[36mweb_1        |[0m   File "/app/web/database.py", line 4, in <module>
[36mweb_1        |[0m     from .models import ApiKey
[36mweb_1        |[0m   File "/app/web/models.py", line 7, in <module>
[36mweb_1        |[0m     from database import Base
[36mweb_1        |[0m ModuleNotFoundError: No module named 'database'
Attaching to timescale_av, api-db_web_1
[33mtimescale_av |[0m 
[33mtimescale_av |[0m PostgreSQL Database directory appears to contain a database; Skipping initialization
[33mtimescale_av |[0m 
[33mtimescale_av |[0m 2023-04-01 09:57:03.708 UTC [1] LOG:  starting PostgreSQL 12.14 on x86_64-pc-linux-musl, compiled by gcc (Alpine 12.2.1_git20220924-r4) 12.2.1 20220924, 64-bit
[33mtimescale_av |[0m 2023-04-01 09:57:03.708 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
[33mtimescale_av |[0m 2023-04-01 09:57:03.708 UTC [1] LOG:  listening on IPv6 address "::", port 5432
[33mtimescale_av |[0m 2023-04-01 09:57:03.730 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
[33mtimescale_av |[0m 2023-04-01 09:57:03.955 UTC [22] LOG:  database system was shut down at 2023-04-01 09:55:33 UTC
[33mtimescale_av |[0m 2023-04-01 09:57:04.013 UTC [1] LOG:  database system is ready to accept connections
[33mtimescale_av |[0m 2023-04-01 09:57:04.038 UTC [28] LOG:  TimescaleDB background worker launcher connected to shared catalogs
[36mweb_1        |[0m INFO:     Will watch for changes in these directories: ['/app']
[36mweb_1        |[0m INFO:     Uvicorn running on http://0.0.0.0:80 (Press CTRL+C to quit)
[36mweb_1        |[0m INFO:     Started reloader process [1] using StatReload
[36mweb_1        |[0m Process SpawnProcess-1:
[36mweb_1        |[0m Traceback (most recent call last):
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/multiprocessing/process.py", line 315, in _bootstrap
[36mweb_1        |[0m     self.run()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/multiprocessing/process.py", line 108, in run
[36mweb_1        |[0m     self._target(*self._args, **self._kwargs)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
[36mweb_1        |[0m     target(sockets=sockets)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 59, in run
[36mweb_1        |[0m     return asyncio.run(self.serve(sockets=sockets))
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/asyncio/runners.py", line 44, in run
[36mweb_1        |[0m     return loop.run_until_complete(main)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/asyncio/base_events.py", line 616, in run_until_complete
[36mweb_1        |[0m     return future.result()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 66, in serve
[36mweb_1        |[0m     config.load()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/config.py", line 471, in load
[36mweb_1        |[0m     self.loaded_app = import_from_string(self.app)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/importer.py", line 24, in import_from_string
[36mweb_1        |[0m     raise exc from None
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/importer.py", line 21, in import_from_string
[36mweb_1        |[0m     module = importlib.import_module(module_str)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/importlib/__init__.py", line 127, in import_module
[36mweb_1        |[0m     return _bootstrap._gcd_import(name[level:], package, level)
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 1014, in _gcd_import
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 991, in _find_and_load
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 975, in _find_and_load_unlocked
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 671, in _load_unlocked
[36mweb_1        |[0m   File "<frozen importlib._bootstrap_external>", line 843, in exec_module
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 219, in _call_with_frames_removed
[36mweb_1        |[0m   File "/app/web/main.py", line 7, in <module>
[36mweb_1        |[0m     from web import schemas, database
[36mweb_1        |[0m   File "/app/web/database.py", line 4, in <module>
[36mweb_1        |[0m     from .models import ApiKey
[36mweb_1        |[0m   File "/app/web/models.py", line 7, in <module>
[36mweb_1        |[0m     from database import Base
[36mweb_1        |[0m ModuleNotFoundError: No module named 'database'
Attaching to timescale_av, api-db_web_1
[33mtimescale_av |[0m 
[33mtimescale_av |[0m PostgreSQL Database directory appears to contain a database; Skipping initialization
[33mtimescale_av |[0m 
[33mtimescale_av |[0m 2023-04-01 09:58:11.472 UTC [1] LOG:  starting PostgreSQL 12.14 on x86_64-pc-linux-musl, compiled by gcc (Alpine 12.2.1_git20220924-r4) 12.2.1 20220924, 64-bit
[33mtimescale_av |[0m 2023-04-01 09:58:11.472 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
[33mtimescale_av |[0m 2023-04-01 09:58:11.472 UTC [1] LOG:  listening on IPv6 address "::", port 5432
[33mtimescale_av |[0m 2023-04-01 09:58:11.506 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
[33mtimescale_av |[0m 2023-04-01 09:58:11.715 UTC [22] LOG:  database system was shut down at 2023-04-01 09:57:12 UTC
[33mtimescale_av |[0m 2023-04-01 09:58:11.752 UTC [1] LOG:  database system is ready to accept connections
[33mtimescale_av |[0m 2023-04-01 09:58:11.757 UTC [28] LOG:  TimescaleDB background worker launcher connected to shared catalogs
[36mweb_1        |[0m INFO:     Will watch for changes in these directories: ['/app']
[36mweb_1        |[0m INFO:     Uvicorn running on http://0.0.0.0:80 (Press CTRL+C to quit)
[36mweb_1        |[0m INFO:     Started reloader process [1] using StatReload
[36mweb_1        |[0m Process SpawnProcess-1:
[36mweb_1        |[0m Traceback (most recent call last):
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/multiprocessing/process.py", line 315, in _bootstrap
[36mweb_1        |[0m     self.run()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/multiprocessing/process.py", line 108, in run
[36mweb_1        |[0m     self._target(*self._args, **self._kwargs)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
[36mweb_1        |[0m     target(sockets=sockets)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 59, in run
[36mweb_1        |[0m     return asyncio.run(self.serve(sockets=sockets))
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/asyncio/runners.py", line 44, in run
[36mweb_1        |[0m     return loop.run_until_complete(main)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/asyncio/base_events.py", line 616, in run_until_complete
[36mweb_1        |[0m     return future.result()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 66, in serve
[36mweb_1        |[0m     config.load()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/config.py", line 471, in load
[36mweb_1        |[0m     self.loaded_app = import_from_string(self.app)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/importer.py", line 24, in import_from_string
[36mweb_1        |[0m     raise exc from None
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/importer.py", line 21, in import_from_string
[36mweb_1        |[0m     module = importlib.import_module(module_str)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/importlib/__init__.py", line 127, in import_module
[36mweb_1        |[0m     return _bootstrap._gcd_import(name[level:], package, level)
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 1014, in _gcd_import
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 991, in _find_and_load
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 975, in _find_and_load_unlocked
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 671, in _load_unlocked
[36mweb_1        |[0m   File "<frozen importlib._bootstrap_external>", line 843, in exec_module
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 219, in _call_with_frames_removed
[36mweb_1        |[0m   File "/app/web/main.py", line 7, in <module>
[36mweb_1        |[0m     from web import schemas, database
[36mweb_1        |[0m   File "/app/web/database.py", line 4, in <module>
[36mweb_1        |[0m     from .models import ApiKey
[36mweb_1        |[0m   File "/app/web/models.py", line 7, in <module>
[36mweb_1        |[0m     from .database import Base
[36mweb_1        |[0m ImportError: cannot import name 'Base' from partially initialized module 'web.database' (most likely due to a circular import) (/app/web/database.py)
Attaching to timescale_av, api-db_web_1
[33mtimescale_av |[0m 
[33mtimescale_av |[0m PostgreSQL Database directory appears to contain a database; Skipping initialization
[33mtimescale_av |[0m 
[33mtimescale_av |[0m 2023-04-01 10:01:49.715 UTC [1] LOG:  starting PostgreSQL 12.14 on x86_64-pc-linux-musl, compiled by gcc (Alpine 12.2.1_git20220924-r4) 12.2.1 20220924, 64-bit
[33mtimescale_av |[0m 2023-04-01 10:01:49.715 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
[33mtimescale_av |[0m 2023-04-01 10:01:49.715 UTC [1] LOG:  listening on IPv6 address "::", port 5432
[33mtimescale_av |[0m 2023-04-01 10:01:49.748 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
[33mtimescale_av |[0m 2023-04-01 10:01:49.973 UTC [22] LOG:  database system was shut down at 2023-04-01 09:58:23 UTC
[33mtimescale_av |[0m 2023-04-01 10:01:50.010 UTC [1] LOG:  database system is ready to accept connections
[33mtimescale_av |[0m 2023-04-01 10:01:50.013 UTC [28] LOG:  TimescaleDB background worker launcher connected to shared catalogs
[36mweb_1        |[0m INFO:     Will watch for changes in these directories: ['/app']
[36mweb_1        |[0m INFO:     Uvicorn running on http://0.0.0.0:80 (Press CTRL+C to quit)
[36mweb_1        |[0m INFO:     Started reloader process [1] using StatReload
[36mweb_1        |[0m Process SpawnProcess-1:
[36mweb_1        |[0m Traceback (most recent call last):
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/multiprocessing/process.py", line 315, in _bootstrap
[36mweb_1        |[0m     self.run()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/multiprocessing/process.py", line 108, in run
[36mweb_1        |[0m     self._target(*self._args, **self._kwargs)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
[36mweb_1        |[0m     target(sockets=sockets)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 59, in run
[36mweb_1        |[0m     return asyncio.run(self.serve(sockets=sockets))
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/asyncio/runners.py", line 44, in run
[36mweb_1        |[0m     return loop.run_until_complete(main)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/asyncio/base_events.py", line 616, in run_until_complete
[36mweb_1        |[0m     return future.result()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 66, in serve
[36mweb_1        |[0m     config.load()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/config.py", line 471, in load
[36mweb_1        |[0m     self.loaded_app = import_from_string(self.app)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/importer.py", line 24, in import_from_string
[36mweb_1        |[0m     raise exc from None
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/importer.py", line 21, in import_from_string
[36mweb_1        |[0m     module = importlib.import_module(module_str)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/importlib/__init__.py", line 127, in import_module
[36mweb_1        |[0m     return _bootstrap._gcd_import(name[level:], package, level)
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 1014, in _gcd_import
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 991, in _find_and_load
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 975, in _find_and_load_unlocked
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 671, in _load_unlocked
[36mweb_1        |[0m   File "<frozen importlib._bootstrap_external>", line 843, in exec_module
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 219, in _call_with_frames_removed
[36mweb_1        |[0m   File "/app/web/main.py", line 7, in <module>
[36mweb_1        |[0m     from web import schemas, database
[36mweb_1        |[0m   File "/app/web/database.py", line 4, in <module>
[36mweb_1        |[0m     from .models import ApiKey
[36mweb_1        |[0m   File "/app/web/models.py", line 4, in <module>
[36mweb_1        |[0m     from .database import Base
[36mweb_1        |[0m ImportError: cannot import name 'Base' from partially initialized module 'web.database' (most likely due to a circular import) (/app/web/database.py)
Attaching to timescale_av, api-db_web_1
[33mtimescale_av |[0m 
[33mtimescale_av |[0m PostgreSQL Database directory appears to contain a database; Skipping initialization
[33mtimescale_av |[0m 
[33mtimescale_av |[0m 2023-04-01 10:07:04.878 UTC [1] LOG:  starting PostgreSQL 12.14 on x86_64-pc-linux-musl, compiled by gcc (Alpine 12.2.1_git20220924-r4) 12.2.1 20220924, 64-bit
[33mtimescale_av |[0m 2023-04-01 10:07:04.878 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
[33mtimescale_av |[0m 2023-04-01 10:07:04.878 UTC [1] LOG:  listening on IPv6 address "::", port 5432
[33mtimescale_av |[0m 2023-04-01 10:07:04.912 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
[33mtimescale_av |[0m 2023-04-01 10:07:05.129 UTC [23] LOG:  database system was shut down at 2023-04-01 10:02:02 UTC
[33mtimescale_av |[0m 2023-04-01 10:07:05.166 UTC [1] LOG:  database system is ready to accept connections
[33mtimescale_av |[0m 2023-04-01 10:07:05.168 UTC [29] LOG:  TimescaleDB background worker launcher connected to shared catalogs
[36mweb_1        |[0m INFO:     Will watch for changes in these directories: ['/app']
[36mweb_1        |[0m INFO:     Uvicorn running on http://0.0.0.0:80 (Press CTRL+C to quit)
[36mweb_1        |[0m INFO:     Started reloader process [1] using StatReload
[36mweb_1        |[0m Process SpawnProcess-1:
[36mweb_1        |[0m Traceback (most recent call last):
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/multiprocessing/process.py", line 315, in _bootstrap
[36mweb_1        |[0m     self.run()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/multiprocessing/process.py", line 108, in run
[36mweb_1        |[0m     self._target(*self._args, **self._kwargs)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
[36mweb_1        |[0m     target(sockets=sockets)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 59, in run
[36mweb_1        |[0m     return asyncio.run(self.serve(sockets=sockets))
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/asyncio/runners.py", line 44, in run
[36mweb_1        |[0m     return loop.run_until_complete(main)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/asyncio/base_events.py", line 616, in run_until_complete
[36mweb_1        |[0m     return future.result()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 66, in serve
[36mweb_1        |[0m     config.load()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/config.py", line 471, in load
[36mweb_1        |[0m     self.loaded_app = import_from_string(self.app)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/importer.py", line 21, in import_from_string
[36mweb_1        |[0m     module = importlib.import_module(module_str)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/importlib/__init__.py", line 127, in import_module
[36mweb_1        |[0m     return _bootstrap._gcd_import(name[level:], package, level)
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 1014, in _gcd_import
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 991, in _find_and_load
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 975, in _find_and_load_unlocked
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 671, in _load_unlocked
[36mweb_1        |[0m   File "<frozen importlib._bootstrap_external>", line 843, in exec_module
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 219, in _call_with_frames_removed
[36mweb_1        |[0m   File "/app/web/main.py", line 9, in <module>
[36mweb_1        |[0m     from .models import ApiKey, Base
[36mweb_1        |[0m   File "/app/web/models.py", line 22, in <module>
[36mweb_1        |[0m     Table('api_keys', metadata, extend_existing=True)
[36mweb_1        |[0m NameError: name 'Table' is not defined
[36mweb_1        |[0m WARNING:  StatReload detected changes in 'web/models.py'. Reloading...
[36mweb_1        |[0m INFO:     Started server process [11]
[36mweb_1        |[0m INFO:     Waiting for application startup.
[36mweb_1        |[0m INFO:     Application startup complete.
[36mweb_1        |[0m INFO:     192.168.1.214:49186 - "GET / HTTP/1.1" 200 OK
[36mweb_1        |[0m INFO:     192.168.1.214:49186 - "GET /settings HTTP/1.1" 200 OK
[36mweb_1        |[0m INFO:     192.168.1.214:49186 - "GET /api_manager HTTP/1.1" 200 OK
[36mweb_1        |[0m INFO:     192.168.1.214:49212 - "POST /api/api_manager HTTP/1.1" 500 Internal Server Error
[36mweb_1        |[0m ERROR:    Exception in ASGI application
[36mweb_1        |[0m Traceback (most recent call last):
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 3319, in add
[36mweb_1        |[0m     state = attributes.instance_state(instance)
[36mweb_1        |[0m AttributeError: 'ApiKey' object has no attribute '_sa_instance_state'
[36mweb_1        |[0m 
[36mweb_1        |[0m The above exception was the direct cause of the following exception:
[36mweb_1        |[0m 
[36mweb_1        |[0m Traceback (most recent call last):
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 429, in run_asgi
[36mweb_1        |[0m     result = await app(  # type: ignore[func-returns-value]
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
[36mweb_1        |[0m     return await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 276, in __call__
[36mweb_1        |[0m     await super().__call__(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
[36mweb_1        |[0m     await self.middleware_stack(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
[36mweb_1        |[0m     raise exc
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, _send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
[36mweb_1        |[0m     raise exc
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, sender)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
[36mweb_1        |[0m     raise e
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
[36mweb_1        |[0m     await route.handle(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
[36mweb_1        |[0m     await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 66, in app
[36mweb_1        |[0m     response = await func(request)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 237, in app
[36mweb_1        |[0m     raw_response = await run_endpoint_function(
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
[36mweb_1        |[0m     return await dependant.call(**values)
[36mweb_1        |[0m   File "/app/web/main.py", line 58, in add_api_key
[36mweb_1        |[0m     db.add(api_key)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 3321, in add
[36mweb_1        |[0m     raise exc.UnmappedInstanceError(instance) from err
[36mweb_1        |[0m sqlalchemy.orm.exc.UnmappedInstanceError: Class 'web.schemas.ApiKey' is not mapped
Attaching to timescale_av, api-db_web_1
[33mtimescale_av |[0m 
[33mtimescale_av |[0m PostgreSQL Database directory appears to contain a database; Skipping initialization
[33mtimescale_av |[0m 
[33mtimescale_av |[0m 2023-04-01 10:11:06.158 UTC [1] LOG:  starting PostgreSQL 12.14 on x86_64-pc-linux-musl, compiled by gcc (Alpine 12.2.1_git20220924-r4) 12.2.1 20220924, 64-bit
[33mtimescale_av |[0m 2023-04-01 10:11:06.158 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
[33mtimescale_av |[0m 2023-04-01 10:11:06.158 UTC [1] LOG:  listening on IPv6 address "::", port 5432
[33mtimescale_av |[0m 2023-04-01 10:11:06.226 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
[33mtimescale_av |[0m 2023-04-01 10:11:06.519 UTC [23] LOG:  database system was shut down at 2023-04-01 10:08:10 UTC
[33mtimescale_av |[0m 2023-04-01 10:11:06.587 UTC [1] LOG:  database system is ready to accept connections
[33mtimescale_av |[0m 2023-04-01 10:11:06.590 UTC [29] LOG:  TimescaleDB background worker launcher connected to shared catalogs
[36mweb_1        |[0m INFO:     Will watch for changes in these directories: ['/app']
[36mweb_1        |[0m INFO:     Uvicorn running on http://0.0.0.0:80 (Press CTRL+C to quit)
[36mweb_1        |[0m INFO:     Started reloader process [1] using StatReload
[36mweb_1        |[0m INFO:     Started server process [8]
[36mweb_1        |[0m INFO:     Waiting for application startup.
[36mweb_1        |[0m INFO:     Application startup complete.
[36mweb_1        |[0m WARNING:  StatReload detected changes in 'web/main.py'. Reloading...
[36mweb_1        |[0m INFO:     Shutting down
[36mweb_1        |[0m INFO:     Waiting for application shutdown.
[36mweb_1        |[0m INFO:     Application shutdown complete.
[36mweb_1        |[0m INFO:     Finished server process [8]
[36mweb_1        |[0m Failed to create database tables: (psycopg2.OperationalError) could not connect to server: Connection timed out
[36mweb_1        |[0m 	Is the server running on host "192.168.80.1" and accepting
[36mweb_1        |[0m 	TCP/IP connections on port 5432?
[36mweb_1        |[0m 
[36mweb_1        |[0m (Background on this error at: https://sqlalche.me/e/20/e3q8)
[36mweb_1        |[0m INFO:     Started server process [10]
[36mweb_1        |[0m INFO:     Waiting for application startup.
[36mweb_1        |[0m INFO:     Application startup complete.
[36mweb_1        |[0m INFO:     192.168.1.214:49956 - "GET / HTTP/1.1" 200 OK
[36mweb_1        |[0m INFO:     192.168.1.214:49956 - "GET /settings HTTP/1.1" 200 OK
[36mweb_1        |[0m INFO:     192.168.1.214:49956 - "GET /api_manager HTTP/1.1" 200 OK
[36mweb_1        |[0m INFO:     192.168.1.214:49978 - "POST /api/api_manager HTTP/1.1" 500 Internal Server Error
[36mweb_1        |[0m ERROR:    Exception in ASGI application
[36mweb_1        |[0m Traceback (most recent call last):
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 3319, in add
[36mweb_1        |[0m     state = attributes.instance_state(instance)
[36mweb_1        |[0m AttributeError: 'ApiKey' object has no attribute '_sa_instance_state'
[36mweb_1        |[0m 
[36mweb_1        |[0m The above exception was the direct cause of the following exception:
[36mweb_1        |[0m 
[36mweb_1        |[0m Traceback (most recent call last):
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 429, in run_asgi
[36mweb_1        |[0m     result = await app(  # type: ignore[func-returns-value]
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
[36mweb_1        |[0m     return await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 276, in __call__
[36mweb_1        |[0m     await super().__call__(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
[36mweb_1        |[0m     await self.middleware_stack(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
[36mweb_1        |[0m     raise exc
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, _send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
[36mweb_1        |[0m     raise exc
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, sender)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
[36mweb_1        |[0m     raise e
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
[36mweb_1        |[0m     await route.handle(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
[36mweb_1        |[0m     await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 66, in app
[36mweb_1        |[0m     response = await func(request)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 237, in app
[36mweb_1        |[0m     raw_response = await run_endpoint_function(
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
[36mweb_1        |[0m     return await dependant.call(**values)
[36mweb_1        |[0m   File "/app/web/main.py", line 60, in add_api_key
[36mweb_1        |[0m     db.add(api_key)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/orm/session.py", line 3321, in add
[36mweb_1        |[0m     raise exc.UnmappedInstanceError(instance) from err
[36mweb_1        |[0m sqlalchemy.orm.exc.UnmappedInstanceError: Class 'web.schemas.ApiKey' is not mapped
Attaching to timescale_av, api-db_web_1
[33mtimescale_av |[0m 
[33mtimescale_av |[0m PostgreSQL Database directory appears to contain a database; Skipping initialization
[33mtimescale_av |[0m 
[33mtimescale_av |[0m 2023-04-01 10:15:53.506 UTC [1] LOG:  starting PostgreSQL 12.14 on x86_64-pc-linux-musl, compiled by gcc (Alpine 12.2.1_git20220924-r4) 12.2.1 20220924, 64-bit
[33mtimescale_av |[0m 2023-04-01 10:15:53.507 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
[33mtimescale_av |[0m 2023-04-01 10:15:53.507 UTC [1] LOG:  listening on IPv6 address "::", port 5432
[33mtimescale_av |[0m 2023-04-01 10:15:53.540 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
[33mtimescale_av |[0m 2023-04-01 10:15:53.765 UTC [22] LOG:  database system was shut down at 2023-04-01 10:14:09 UTC
[33mtimescale_av |[0m 2023-04-01 10:15:53.820 UTC [1] LOG:  database system is ready to accept connections
[33mtimescale_av |[0m 2023-04-01 10:15:53.826 UTC [28] LOG:  TimescaleDB background worker launcher connected to shared catalogs
[36mweb_1        |[0m INFO:     Will watch for changes in these directories: ['/app']
[36mweb_1        |[0m INFO:     Uvicorn running on http://0.0.0.0:80 (Press CTRL+C to quit)
[36mweb_1        |[0m INFO:     Started reloader process [1] using StatReload
[36mweb_1        |[0m Process SpawnProcess-1:
[36mweb_1        |[0m Traceback (most recent call last):
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/multiprocessing/process.py", line 315, in _bootstrap
[36mweb_1        |[0m     self.run()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/multiprocessing/process.py", line 108, in run
[36mweb_1        |[0m     self._target(*self._args, **self._kwargs)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/_subprocess.py", line 76, in subprocess_started
[36mweb_1        |[0m     target(sockets=sockets)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 59, in run
[36mweb_1        |[0m     return asyncio.run(self.serve(sockets=sockets))
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/asyncio/runners.py", line 44, in run
[36mweb_1        |[0m     return loop.run_until_complete(main)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/asyncio/base_events.py", line 616, in run_until_complete
[36mweb_1        |[0m     return future.result()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/server.py", line 66, in serve
[36mweb_1        |[0m     config.load()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/config.py", line 471, in load
[36mweb_1        |[0m     self.loaded_app = import_from_string(self.app)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/importer.py", line 24, in import_from_string
[36mweb_1        |[0m     raise exc from None
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/importer.py", line 21, in import_from_string
[36mweb_1        |[0m     module = importlib.import_module(module_str)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/importlib/__init__.py", line 127, in import_module
[36mweb_1        |[0m     return _bootstrap._gcd_import(name[level:], package, level)
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 1014, in _gcd_import
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 991, in _find_and_load
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 975, in _find_and_load_unlocked
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 671, in _load_unlocked
[36mweb_1        |[0m   File "<frozen importlib._bootstrap_external>", line 843, in exec_module
[36mweb_1        |[0m   File "<frozen importlib._bootstrap>", line 219, in _call_with_frames_removed
[36mweb_1        |[0m   File "/app/web/main.py", line 11, in <module>
[36mweb_1        |[0m     from .database import Base
[36mweb_1        |[0m ImportError: cannot import name 'Base' from 'web.database' (/app/web/database.py)
Attaching to timescale_av, api-db_web_1
[33mtimescale_av |[0m 
[33mtimescale_av |[0m PostgreSQL Database directory appears to contain a database; Skipping initialization
[33mtimescale_av |[0m 
[33mtimescale_av |[0m 2023-04-01 10:20:53.828 UTC [1] LOG:  starting PostgreSQL 12.14 on x86_64-pc-linux-musl, compiled by gcc (Alpine 12.2.1_git20220924-r4) 12.2.1 20220924, 64-bit
[33mtimescale_av |[0m 2023-04-01 10:20:53.828 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
[33mtimescale_av |[0m 2023-04-01 10:20:53.828 UTC [1] LOG:  listening on IPv6 address "::", port 5432
[33mtimescale_av |[0m 2023-04-01 10:20:53.869 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
[33mtimescale_av |[0m 2023-04-01 10:20:54.087 UTC [23] LOG:  database system was shut down at 2023-04-01 10:16:11 UTC
[33mtimescale_av |[0m 2023-04-01 10:20:54.123 UTC [1] LOG:  database system is ready to accept connections
[33mtimescale_av |[0m 2023-04-01 10:20:54.126 UTC [29] LOG:  TimescaleDB background worker launcher connected to shared catalogs
[36mweb_1        |[0m INFO:     Will watch for changes in these directories: ['/app']
[36mweb_1        |[0m INFO:     Uvicorn running on http://0.0.0.0:80 (Press CTRL+C to quit)
[36mweb_1        |[0m INFO:     Started reloader process [1] using StatReload
[36mweb_1        |[0m INFO:     Started server process [8]
[36mweb_1        |[0m INFO:     Waiting for application startup.
[36mweb_1        |[0m INFO:     Application startup complete.
[36mweb_1        |[0m INFO:     192.168.1.214:50528 - "GET / HTTP/1.1" 200 OK
[36mweb_1        |[0m INFO:     192.168.1.214:50528 - "GET /settings HTTP/1.1" 200 OK
[36mweb_1        |[0m INFO:     192.168.1.214:50528 - "GET /api_manager HTTP/1.1" 200 OK
[36mweb_1        |[0m ERROR:    Exception in ASGI application
[36mweb_1        |[0m Traceback (most recent call last):
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
[36mweb_1        |[0m     self._dbapi_connection = engine.raw_connection()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 3275, in raw_connection
[36mweb_1        |[0m     return self.pool.connect()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 455, in connect
[36mweb_1        |[0m     return _ConnectionFairy._checkout(self)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 1271, in _checkout
[36mweb_1        |[0m     fairy = _ConnectionRecord.checkout(pool)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 719, in checkout
[36mweb_1        |[0m     rec = pool._do_get()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/impl.py", line 169, in _do_get
[36mweb_1        |[0m     self._dec_overflow()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__
[36mweb_1        |[0m     raise exc_value.with_traceback(exc_tb)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
[36mweb_1        |[0m     return self._create_connection()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 396, in _create_connection
[36mweb_1        |[0m     return _ConnectionRecord(self)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 681, in __init__
[36mweb_1        |[0m     self.__connect()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 906, in __connect
[36mweb_1        |[0m     pool.logger.debug("Error on connect(): %s", e)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__
[36mweb_1        |[0m     raise exc_value.with_traceback(exc_tb)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 901, in __connect
[36mweb_1        |[0m     self.dbapi_connection = connection = pool._invoke_creator(self)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/create.py", line 636, in connect
[36mweb_1        |[0m     return dialect.connect(*cargs, **cparams)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 580, in connect
[36mweb_1        |[0m     return self.loaded_dbapi.connect(*cargs, **cparams)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/psycopg2/__init__.py", line 122, in connect
[36mweb_1        |[0m     conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
[36mweb_1        |[0m psycopg2.OperationalError: could not connect to server: Connection timed out
[36mweb_1        |[0m 	Is the server running on host "192.168.80.1" and accepting
[36mweb_1        |[0m 	TCP/IP connections on port 5432?
[36mweb_1        |[0m 
[36mweb_1        |[0m 
[36mweb_1        |[0m The above exception was the direct cause of the following exception:
[36mweb_1        |[0m 
[36mweb_1        |[0m Traceback (most recent call last):
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/protocols/http/h11_impl.py", line 429, in run_asgi
[36mweb_1        |[0m     result = await app(  # type: ignore[func-returns-value]
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
[36mweb_1        |[0m     return await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/applications.py", line 276, in __call__
[36mweb_1        |[0m     await super().__call__(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/applications.py", line 122, in __call__
[36mweb_1        |[0m     await self.middleware_stack(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 184, in __call__
[36mweb_1        |[0m     raise exc
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/errors.py", line 162, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, _send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
[36mweb_1        |[0m     raise exc
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, sender)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 21, in __call__
[36mweb_1        |[0m     raise e
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
[36mweb_1        |[0m     await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 718, in __call__
[36mweb_1        |[0m     await route.handle(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 276, in handle
[36mweb_1        |[0m     await self.app(scope, receive, send)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/starlette/routing.py", line 66, in app
[36mweb_1        |[0m     response = await func(request)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 237, in app
[36mweb_1        |[0m     raw_response = await run_endpoint_function(
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/fastapi/routing.py", line 163, in run_endpoint_function
[36mweb_1        |[0m     return await dependant.call(**values)
[36mweb_1        |[0m   File "/app/web/main.py", line 66, in add_api_key
[36mweb_1        |[0m     Base.metadata.create_all(bind=engine)  # создание таблицы ApiKey в базе данных
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/sql/schema.py", line 5581, in create_all
[36mweb_1        |[0m     bind._run_ddl_visitor(
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 3225, in _run_ddl_visitor
[36mweb_1        |[0m     with self.begin() as conn:
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/contextlib.py", line 113, in __enter__
[36mweb_1        |[0m     return next(self.gen)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 3215, in begin
[36mweb_1        |[0m     with self.connect() as conn:
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 3251, in connect
[36mweb_1        |[0m     return self._connection_cls(self)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 147, in __init__
[36mweb_1        |[0m     Connection._handle_dbapi_exception_noconnection(
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 2413, in _handle_dbapi_exception_noconnection
[36mweb_1        |[0m     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 145, in __init__
[36mweb_1        |[0m     self._dbapi_connection = engine.raw_connection()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/base.py", line 3275, in raw_connection
[36mweb_1        |[0m     return self.pool.connect()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 455, in connect
[36mweb_1        |[0m     return _ConnectionFairy._checkout(self)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 1271, in _checkout
[36mweb_1        |[0m     fairy = _ConnectionRecord.checkout(pool)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 719, in checkout
[36mweb_1        |[0m     rec = pool._do_get()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/impl.py", line 169, in _do_get
[36mweb_1        |[0m     self._dec_overflow()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__
[36mweb_1        |[0m     raise exc_value.with_traceback(exc_tb)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
[36mweb_1        |[0m     return self._create_connection()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 396, in _create_connection
[36mweb_1        |[0m     return _ConnectionRecord(self)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 681, in __init__
[36mweb_1        |[0m     self.__connect()
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 906, in __connect
[36mweb_1        |[0m     pool.logger.debug("Error on connect(): %s", e)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/util/langhelpers.py", line 147, in __exit__
[36mweb_1        |[0m     raise exc_value.with_traceback(exc_tb)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/pool/base.py", line 901, in __connect
[36mweb_1        |[0m     self.dbapi_connection = connection = pool._invoke_creator(self)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/create.py", line 636, in connect
[36mweb_1        |[0m     return dialect.connect(*cargs, **cparams)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/sqlalchemy/engine/default.py", line 580, in connect
[36mweb_1        |[0m     return self.loaded_dbapi.connect(*cargs, **cparams)
[36mweb_1        |[0m   File "/usr/local/lib/python3.8/site-packages/psycopg2/__init__.py", line 122, in connect
[36mweb_1        |[0m     conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
[36mweb_1        |[0m sqlalchemy.exc.OperationalError: (psycopg2.OperationalError) could not connect to server: Connection timed out
[36mweb_1        |[0m 	Is the server running on host "192.168.80.1" and accepting
[36mweb_1        |[0m 	TCP/IP connections on port 5432?
[36mweb_1        |[0m 
[36mweb_1        |[0m (Background on this error at: https://sqlalche.me/e/20/e3q8)
[33mtimescale_av |[0m 2023-04-01 10:24:06.171 UTC [99] LOG:  invalid length of startup packet
[33mtimescale_av |[0m 2023-04-01 10:24:07.271 UTC [100] LOG:  invalid length of startup packet
[33mtimescale_av |[0m 2023-04-01 10:24:07.278 UTC [101] LOG:  invalid length of startup packet
[33mtimescale_av |[0m 2023-04-01 10:24:07.289 UTC [102] LOG:  invalid length of startup packet
[33mtimescale_av |[0m 2023-04-01 10:24:12.314 UTC [105] LOG:  invalid length of startup packet
